"-------------------------
" ÐÐ°Ð·Ð¾Ð²ÑÐµ Ð½Ð°ÑÑÑÐ¾Ð¹ÐºÐ¸
"-------------------------

" ÐÐºÐ»ÑÑÐ°ÐµÐ¼ Ð½ÐµÑÐ¾Ð²Ð¼ÐµÑÑÐ¸Ð¼Ð¾ÑÑÑ Ð½Ð°ÑÑÑÐ¾ÐµÐº Ñ Vi (Ð¸Ð±Ð¾ Vi Ð½Ð°Ð¼ Ð¸ Ð½Ðµ Ð¿Ð¾Ð½Ð°Ð´Ð¾Ð±Ð¸ÑÑÑ).
set nocompatible

" ÐÐ¾ÐºÐ°Ð·ÑÐ²Ð°ÑÑ Ð¿Ð¾Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ ÐºÑÑÑÐ¾ÑÐ° Ð²ÑÑ Ð²ÑÐµÐ¼Ñ.
set ruler

" ÐÐ¾ÐºÐ°Ð·ÑÐ²Ð°ÑÑ Ð½ÐµÐ·Ð°Ð²ÐµÑÑÑÐ½Ð½ÑÐµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ Ð² ÑÑÐ°ÑÑÑÐ±Ð°ÑÐµ
set showcmd

" ÐÐºÐ»ÑÑÐ°ÐµÐ¼ Ð½ÑÐ¼ÐµÑÐ°ÑÐ¸Ñ ÑÑÑÐ¾Ðº
" set nu

" Ð¦Ð²ÐµÑÐ¾Ð²Ð°Ñ ÑÑÐµÐ¼Ð°
" colorscheme desert
set background=dark

" Ð¤Ð¾Ð»Ð´Ð¸Ð½Ð³ Ð¿Ð¾ Ð¾ÑÑÑÐ¿Ð°Ð¼
" set foldmethod=indent

" ÐÐ¾Ð¸ÑÐº Ð¿Ð¾ Ð½Ð°Ð±Ð¾ÑÑ ÑÐµÐºÑÑÐ° (Ð¾ÑÐµÐ½Ñ Ð¿Ð¾Ð»ÐµÐ·Ð½Ð°Ñ ÑÑÐ½ÐºÑÐ¸Ñ)
set incsearch

" ÐÑÐºÐ»ÑÑÐ°ÐµÐ¼ Ð¿Ð¾Ð´ÑÑÐ²ÐµÑÐºÑ Ð½Ð°Ð¹Ð´ÐµÐ½Ð½ÑÑ Ð²Ð°ÑÐ¸Ð°Ð½ÑÐ¾Ð², Ð¸ ÑÐ°Ðº Ð²ÑÑ Ð²Ð¸Ð´Ð½Ð¾.
set nohlsearch

" Ð¢ÐµÐ¿ÐµÑÑ Ð½ÐµÑ Ð½ÐµÐ¾Ð±ÑÐ¾Ð´Ð¸Ð¼Ð¾ÑÑÐ¸ Ð¿ÐµÑÐµÐ´Ð²Ð¸Ð³Ð°ÑÑ ÐºÑÑÑÐ¾Ñ Ðº ÐºÑÐ°Ñ ÑÐºÑÐ°Ð½Ð°, ÑÑÐ¾Ð±Ñ Ð¿Ð¾Ð´Ð½ÑÑÑÑÑ Ð² ÑÐµÐ¶Ð¸Ð¼Ðµ ÑÐµÐ´Ð°ÐºÑÐ¸ÑÐ¾Ð²Ð°Ð½Ð¸Ñ
set scrolljump=7

" Ð¢ÐµÐ¿ÐµÑÑ Ð½ÐµÑ Ð½ÐµÐ¾Ð±ÑÐ¾Ð´Ð¸Ð¼Ð¾ÑÑÐ¸ Ð¿ÐµÑÐµÐ´Ð²Ð¸Ð³Ð°ÑÑ ÐºÑÑÑÐ¾Ñ Ðº ÐºÑÐ°Ñ ÑÐºÑÐ°Ð½Ð°, ÑÑÐ¾Ð±Ñ Ð¾Ð¿ÑÑÑÐ¸ÑÑÑÑ Ð² ÑÐµÐ¶Ð¸Ð¼Ðµ ÑÐµÐ´Ð°ÐºÑÐ¸ÑÐ¾Ð²Ð°Ð½Ð¸Ñ
set scrolloff=7

" ÐÑÐºÐ»ÑÑÐ°ÐµÐ¼ Ð½Ð°Ð´Ð¾ÐµÐ´Ð»Ð¸Ð²ÑÐ¹ "Ð·Ð²Ð¾Ð½Ð¾Ðº"
set novisualbell
set t_vb=

" ÐÐ¾Ð´Ð´ÐµÑÐ¶ÐºÐ° Ð¼ÑÑÐ¸
" set mouse=a
" set mousemodel=popup

" ÐÐ¾Ð´Ð¸ÑÐ¾Ð²ÐºÐ° ÑÐµÐºÑÑÐ° Ð¿Ð¾ ÑÐ¼Ð¾Ð»ÑÐ°Ð½Ð¸Ñ
set termencoding=utf-8

" ÐÐµ Ð²ÑÐ³ÑÑÐ¶Ð°ÑÑ Ð±ÑÑÐµÑ, ÐºÐ¾Ð³Ð´Ð° Ð¿ÐµÑÐµÐºÐ»ÑÑÐ°ÐµÐ¼ÑÑ Ð½Ð° Ð´ÑÑÐ³Ð¾Ð¹
" Ð­ÑÐ¾ Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐµÑ ÑÐµÐ´Ð°ÐºÑÐ¸ÑÐ¾Ð²Ð°ÑÑ Ð½ÐµÑÐºÐ¾Ð»ÑÐºÐ¾ ÑÐ°Ð¹Ð»Ð¾Ð² Ð² Ð¾Ð´Ð¸Ð½ Ð¸ ÑÐ¾Ñ Ð¶Ðµ Ð¼Ð¾Ð¼ÐµÐ½Ñ Ð±ÐµÐ· Ð½ÐµÐ¾Ð±ÑÐ¾Ð´Ð¸Ð¼Ð¾ÑÑÐ¸ ÑÐ¾ÑÑÐ°Ð½ÐµÐ½Ð¸Ñ ÐºÐ°Ð¶Ð´ÑÐ¹ ÑÐ°Ð·
" ÐºÐ¾Ð³Ð´Ð° Ð¿ÐµÑÐµÐºÐ»ÑÑÐ°ÐµÑÑÑÑ Ð¼ÐµÐ¶Ð´Ñ Ð½Ð¸Ð¼Ð¸
" set hidden

" Ð¡ÐºÑÑÑÑ Ð¿Ð°Ð½ÐµÐ»Ñ Ð² gui Ð²ÐµÑÑÐ¸Ð¸ Ð¸Ð±Ð¾ Ð¾Ð½Ð° Ð½Ðµ Ð½ÑÐ¶Ð½Ð°
set guioptions-=T

" Ð¡Ð´ÐµÐ»Ð°ÑÑ ÑÑÑÐ¾ÐºÑ ÐºÐ¾Ð¼Ð°Ð½Ð´ Ð²ÑÑÐ¾ÑÐ¾Ð¹ Ð² Ð¾Ð´Ð½Ñ ÑÑÑÐ¾ÐºÑ
set ch=1

" Ð¡ÐºÑÑÐ²Ð°ÑÑ ÑÐºÐ°Ð·Ð°ÑÐµÐ»Ñ Ð¼ÑÑÐ¸, ÐºÐ¾Ð³Ð´Ð° Ð¿ÐµÑÐ°ÑÐ°ÐµÐ¼
set mousehide

" ÐÐºÐ»ÑÑÐ¸ÑÑ Ð°Ð²ÑÐ¾Ð¾ÑÑÑÑÐ¿Ñ
set autoindent

" ÐÐ»ÑÑÐ¸ÑÑ Ð¿Ð¾Ð´ÑÑÐ²ÐµÑÐºÑ ÑÐ¸Ð½ÑÐ°ÐºÑÐ¸ÑÐ°
syntax on

" allow to use backspace instead of "x"
set backspace=indent,eol,start whichwrap+=<,>,[,]

" ÐÑÐµÐ¾Ð±ÑÐ°Ð·Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¢Ð°Ð±Ð° Ð² Ð¿ÑÐ¾Ð±ÐµÐ»Ñ
set expandtab

" Ð Ð°Ð·Ð¼ÐµÑ ÑÐ°Ð±ÑÐ»Ð°ÑÐ¸Ð¸ Ð¿Ð¾ ÑÐ¼Ð¾Ð»ÑÐ°Ð½Ð¸Ñ
set shiftwidth=4
set softtabstop=4
set tabstop=4
set smarttab


" Ð¤Ð¾ÑÐ¼Ð°Ñ ÑÑÑÐ¾ÐºÐ¸ ÑÐ¾ÑÑÐ¾ÑÐ½Ð¸Ñ
set statusline=%<%f%h%m%r\ %b\ %{&encoding}\ 0x\ \ %l,%c%V\ %P
set laststatus=2

" ÐÐºÐ»ÑÑÐ°ÐµÐ¼ "ÑÐ¼Ð½ÑÐµ" Ð¾ÑÑÐ¿ÑÐ¿Ñ ( Ð½Ð°Ð¿ÑÐ¸Ð¼ÐµÑ, Ð°Ð²ÑÐ¾Ð¾ÑÑÑÑÐ¿ Ð¿Ð¾ÑÐ»Ðµ {)
"set smartindent

" Fix <Enter> for comment
set fo+=cr

" ÐÐ¿ÑÐ¸Ð¸ ÑÐµÑÑÑÐ¸Ð¹
set sessionoptions=curdir,buffers,tabpages

"-------------------------
" ÐÐ¾ÑÑÑÐ¸Ðµ ÐºÐ»Ð°Ð²Ð¸ÑÑ
"-------------------------

" ÐÑÐ¾Ð±ÐµÐ» Ð² Ð½Ð¾ÑÐ¼Ð°Ð»ÑÐ½Ð¾Ð¼ ÑÐµÐ¶Ð¸Ð¼Ðµ Ð¿ÐµÑÐµÐ»Ð¸ÑÑÑÐ²Ð°ÐµÑ ÑÑÑÐ°Ð½Ð¸ÑÑ
nmap <Space> <PageDown>

" CTRL-F Ð´Ð»Ñ omni completion
imap <C-F> <C-X><C-O>

" C-c and C-v - Copy/Paste Ð² "Ð³Ð»Ð¾Ð±Ð°Ð»ÑÐ½ÑÐ¹ ÐºÐ»Ð¸Ð¿Ð±Ð¾ÑÐ´"
vmap <C-C> "+yi
imap <C-V> <esc>"+gPi

" ÐÐ°ÑÑÐ°Ð²Ð»ÑÐµÐ¼ shift-insert ÑÐ°Ð±Ð¾ÑÐ°ÑÑ ÐºÐ°Ðº Ð² Xterm
map <S-Insert> <MiddleMouse>

" C-y - ÑÐ´Ð°Ð»ÐµÐ½Ð¸Ðµ ÑÐµÐºÑÑÐµÐ¹ ÑÑÑÐ¾ÐºÐ¸
nmap <C-y> dd
imap <C-y> <esc>ddi

" C-d - Ð´ÑÐ±Ð»Ð¸ÑÐ¾Ð²Ð°Ð½Ð¸Ðµ ÑÐµÐºÑÑÐµÐ¹ ÑÑÑÐ¾ÐºÐ¸
imap <C-d> <esc>yypi

" ÐÐ¾Ð¸ÑÐº Ð¸ Ð·Ð°Ð¼ÐµÐ½Ð° ÑÐ»Ð¾Ð²Ð° Ð¿Ð¾Ð´ ÐºÑÑÑÐ¾ÑÐ¾Ð¼
nmap ; :%s/\<<c-r>=expand("<cword>")<cr>\>/

" F1 - exit
nmap <F1> :q<cr>
vmap <F1> <esc>:q<cr>i
imap <F1> <esc>:q<cr>i

" F2 - Ð±ÑÑÑÑÐ¾Ðµ ÑÐ¾ÑÑÐ°Ð½ÐµÐ½Ð¸Ðµ
nmap <F2> :w<cr>
vmap <F2> <esc>:w<cr>i
imap <F2> <esc>:w<cr>i

" F3 - Ð¿ÑÐ¾ÑÐ¼Ð¾ÑÑ Ð¾ÑÐ¸Ð±Ð¾Ðº
nmap <F3> :copen<cr>
vmap <F3> <esc>:copen<cr>
imap <F3> <esc>:copen<cr>

" F5 - Ð¿ÑÐ¾ÑÐ¼Ð¾ÑÑ ÑÐ¿Ð¸ÑÐºÐ° Ð±ÑÑÐµÑÐ¾Ð²
nmap <F5> <Esc>:BufExplorer<cr>
vmap <F5> <esc>:BufExplorer<cr>
imap <F5> <esc><esc>:BufExplorer<cr>

" F6 - Ð¿ÑÐµÐ´ÑÐ´ÑÑÐ¸Ð¹ Ð±ÑÑÐµÑ
map <F6> :bp<cr>
vmap <F6> <esc>:bp<cr>i
imap <F6> <esc>:bp<cr>i

" F7 - ÑÐ»ÐµÐ´ÑÑÑÐ¸Ð¹ Ð±ÑÑÐµÑ
map <F7> :bn<cr>
vmap <F7> <esc>:bn<cr>i
imap <F7> <esc>:bn<cr>i

" F8 - ÑÐ¿Ð¸ÑÐ¾Ðº Ð·Ð°ÐºÐ»Ð°Ð´Ð¾Ðº
map <F8> :MarksBrowser<cr>
vmap <F8> <esc>:MarksBrowser<cr>
imap <F8> <esc>:MarksBrowser<cr>

" F9 - "make" ÐºÐ¾Ð¼Ð°Ð½Ð´Ð°
map <F9> :make<cr>
vmap <F9> <esc>:make<cr>i
imap <F9> <esc>:make<cr>i

" F10 - ÑÐ´Ð°Ð»Ð¸ÑÑ Ð±ÑÑÐµÑ
map <F10> :bd<cr>
vmap <F10> <esc>:bd<cr>
imap <F10> <esc>:bd<cr>

" F11 - Ð¿Ð¾ÐºÐ°Ð·Ð°ÑÑ Ð¾ÐºÐ½Ð¾ Taglist
map <F11> :TlistToggle<cr>
vmap <F11> <esc>:TlistToggle<cr>
imap <F11> <esc>:TlistToggle<cr>

" F12 - Ð¾Ð±Ð¾Ð·ÑÐµÐ²Ð°ÑÐµÐ»Ñ ÑÐ°Ð¹Ð»Ð¾Ð²
map <F12> :Ex<cr>
vmap <F12> <esc>:Ex<cr>i
imap <F12> <esc>:Ex<cr>i

" < & > - Ð´ÐµÐ»Ð°ÐµÐ¼ Ð¾ÑÑÑÑÐ¿Ñ Ð´Ð»Ñ Ð±Ð»Ð¾ÐºÐ¾Ð²
vmap < <gv
vmap > >gv

" ÐÑÐºÐ»ÑÑÐ°ÐµÐ¼ Ð½ÐµÐ½Ð°Ð²Ð¸ÑÑÐ½ÑÐ¹ ÑÐµÐ¶Ð¸Ð¼ Ð·Ð°Ð¼ÐµÐ½Ñ
" imap >Ins> <Esc>i
" Ð»Ð¸Ð±Ð¾ Ð²ÑÐºÐ»ÑÑÐ°ÐµÐ¼ ÐµÐ³Ð¾ Ð´ÑÑÐ³Ð¸Ð¼ ÑÐ¿Ð¾ÑÐ¾Ð±Ð¾Ð¼
imap <Insert> <Nop>

" ÐÐµÐ½Ñ Ð²ÑÐ±Ð¾ÑÐ° ÐºÐ¾Ð´Ð¸ÑÐ¾Ð²ÐºÐ¸ ÑÐµÐºÑÑÐ° (koi8-r, cp1251, cp866, utf8)
set wildmenu
set wcm=<Tab>
menu Encoding.koi8-r :e ++enc=koi8-r<CR>
menu Encoding.windows-1251 :e ++enc=cp1251<CR>
menu Encoding.cp866 :e ++enc=cp866<CR>
menu Encoding.utf-8 :e ++enc=utf8 <CR>

" Ð ÐµÐ´ÐºÐ¾ ÐºÐ¾Ð³Ð´Ð° Ð½Ð°Ð´Ð¾ [ Ð±ÐµÐ· Ð¿Ð°ÑÑ =)
imap [ []<LEFT>
" ÐÐ½Ð°Ð»Ð¾Ð³Ð¸ÑÐ½Ð¾ Ð¸ Ð´Ð»Ñ {
imap {<CR> {<CR>}<Esc>O

" Ð¡-q - Ð²ÑÑÐ¾Ð´ Ð¸Ð· Vim
map <C-Q> <Esc>:qa<cr>


" ÐÐ²ÑÐ¾Ð·Ð°Ð²ÐµÑÑÐµÐ½Ð¸Ðµ ÑÐ»Ð¾Ð² Ð¿Ð¾ tab =)
function InsertTabWrapper()
 	let col = col('.') - 1
 	if !col || getline('.')[col - 1] !~ '\k'
     	return "\<tab>"
 	else
     	return "\<c-p>"
 	endif
endfunction
imap <tab> <c-r>=InsertTabWrapper()<cr>

" Ð¡Ð»Ð¾Ð²Ð° Ð¾ÑÐºÑÐ´Ð° Ð±ÑÐ´ÐµÐ¼ Ð·Ð°Ð²ÐµÑÑÐ°ÑÑ
set complete=""
" ÐÐ· ÑÐµÐºÑÑÐµÐ³Ð¾ Ð±ÑÑÐµÑÐ°
set complete+=.
" ÐÐ· ÑÐ»Ð¾Ð²Ð°ÑÑ
set complete+=k
" ÐÐ· Ð´ÑÑÐ³Ð¸Ñ Ð¾ÑÐºÑÑÑÑÑ Ð±ÑÑÐµÑÐ¾Ð²
set complete+=b
" Ð¸Ð· ÑÐµÐ³Ð¾Ð²
set complete+=t

" ÐÐºÐ»ÑÑÐ°ÐµÐ¼ filetype Ð¿Ð»ÑÐ³Ð¸Ð½. ÐÐ°ÑÑÑÐ¾Ð¹ÐºÐ¸, ÑÐ¿ÐµÑÐ¸ÑÐ¸ÑÐ½ÑÐµ Ð´Ð»Ñ Ð¾Ð¿ÑÐµÐ´ÐµÐ»ÑÐ½Ð½ÑÑ ÑÐ°Ð¹Ð»Ð¾Ð² Ð¼Ñ ÑÐ°Ð·Ð½ÐµÑÑÐ¼ Ð¿Ð¾ ÑÐ°Ð·Ð½ÑÐ¼ Ð¼ÐµÑÑÐ°Ð¼
filetype plugin on
au BufRead,BufNewFile *.phps	set filetype=php
au BufRead,BufNewFile *.thtml	set filetype=php

" ÐÐ°ÑÑÑÐ¾Ð¹ÐºÐ¸ Ð´Ð»Ñ SessionMgr
let g:SessionMgr_AutoManage = 0
let g:SessionMgr_DefaultName = "mysession"

" ÐÐ°ÑÑÑÐ¾Ð¹ÐºÐ¸ Ð´Ð»Ñ Tlist (Ð¿Ð¾ÐºÐ°Ð·Ð²Ð°ÑÑ ÑÐ¾Ð»ÑÐºÐ¾ ÑÐµÐºÑÑÐ¸Ð¹ ÑÐ°Ð¹Ð» Ð² Ð¾ÐºÐ½Ðµ Ð½Ð°Ð²Ð¸Ð³Ð°ÑÐ¸Ð¸ Ð¿Ð¾  ÐºÐ¾Ð´Ñ)
let g:Tlist_Show_One_File = 1

set completeopt-=preview
set completeopt+=longest
set mps-=[:]

" make arrow keys work in visual mode
vmap <Esc>OA k
vmap <Esc>OB j
vmap <Esc>OC l
vmap <Esc>OD h
" " simulate shift-arrows (select block in windows) with control-arrows
inoremap <Esc>[A <C-O>vk
vnoremap <Esc>[A k
inoremap <Esc>[B <C-O>vj
vnoremap <Esc>[B j
inoremap <Esc>[C <C-O>vl
vnoremap <Esc>[C l
inoremap <Esc>[D <C-O>vh
vnoremap <Esc>[D h
